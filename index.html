<html>
  <head>
    <meta charset="utf-8">
    <title>Query String Checker</title>
    <link rel="stylesheet" href="milligram.min.css">
    <link rel="stylesheet" href="jquery.json-viewer.css">
    <script src="jquery-3.3.1.slim.min.js"></script>
    <script src="jquery.json-viewer.js"></script>
    <script src="simplequerystring.min.js"></script>
    <style type="text/css">
      body { padding: 1em 1.5em; }
    </style>
  </head>
  <body>
    <h1>Query String Checker</h1>

    <table>
      <tbody>
        <tr>
          <th>Query String</th>
          <td><code id="query-string"></code></td>
        </tr>
        <tr>
          <th>Hash</th>
          <td><code id="hash"></code></td>
        </tr>
        <tr id="tr-hash-decoded">
          <th>Hash (Decoded)</th>
          <td><code id="hash-decoded"></code></td>
        </tr>
      </tbody>
    </table>

    <table id="table-query-params">
      <thead>
        <tr>
          <th>Query Parameter</th>
          <th>Decoded Value</th>
        </tr>
      </thead>
      <tbody id="params"></tbody>
    </table>

    <script>
      onhashchange = ()=>location.reload()
      $('#query-string').text(location.search === '' ? '(none)' : location.search)
      $('#hash').text(location.hash === '' ? '(none)' : location.hash)
      $('#hash-decoded').text(decodeURIComponent(location.hash.substr(1)))
      if (location.hash === '') {
        $('#tr-hash-decoded').hide()
      }

      const qs = simpleQueryString.parse(location.search)
      const qsKeys = Object.keys(qs)
      if (qsKeys.length === 0) {
        $('#table-query-params').hide()
      } else {
        qsKeys.sort()
        for (let k of qsKeys) {
          $('#params').append(
            $('<tr></tr>').append(
              $('<td></td>').append(
                $('<code></code>').text(k)
              )
            ).append(
              $('<td></td>').append(
                $('<code></code>').text(qs[k])
              )
            )
          )
        }
      }
    </script>
  </body>
</html>
